**Глава 15. Отладка**

Отладка — ключевой процесс в решении технических проблем, требующий глубокого анализа и устранения причины, а не симптомов. Это последовательный и обоснованный подход, требующий терпения и подходящих инструментов.

**15.1. Основы отладки**

1. **Точное определение проблемы**: Понять, что именно не работает, собрать информацию о симптомах.
2. **Модели поиска проблемы**:
   - **Метод исключений**: Проверять наиболее вероятные причины.
   - **Дерево решений**: Разбить проблему на подзадачи и проверить их поочередно.
3. **Качества инструментов для отладки**:
   - **Простые в использовании**: Интуитивно понятные.
   - **Мощные**: Возможности для детального анализа.
   - **Интегрированные**: Работают в рамках вашего процесса.

**15.1.1. Ознакомьтесь с проблемой пользователя**

Понять, что происходит с точки зрения пользователя, разобраться в задаче и ожидаемых результатах. Пользователь может описать проблему неполно или некорректно. Важно проявлять терпение и избегать технических терминов.

**15.1.2. Устраняйте причину, а не симптом**

Для долгосрочной надежности систем важно устранять основную причину проблемы, а не только симптомы. Временные решения могут быть полезны, но для предотвращения повторных ошибок важно найти и устранить первопричину.

**15.1.3. Подходите системно**

Методический и системный подход к отладке: строить гипотезы, проверять их, записывать результаты и вносить изменения. Методы: **исключение** и **последовательное уточнение**.

**15.1.4. Пользуйтесь правильными средствами**

Использование инструментов диагностики и знаний. UNIX-системы славятся простотой в отладке благодаря глубоким знаниям администраторов. Windows изначально была "черным ящиком", но со временем стало доступно больше информации для отладки.

**15.2. Тонкости**

**15.2.1. Лучшие средства отладки**

Важно быть в курсе новых инструментов, но избегать поверхностных "модных слов". Перед покупкой запрашивайте пробную версию и протестируйте продукт.

**15.2.2. Формальное обучение работе со средствами отладки**

Формальное обучение дает важные знания, которые отделяют вас от других специалистов. Обучение охватывает все возможности средств, выявляет ошибки и аспекты работы инструментов, предоставляет практическую работу в лабораториях и сертификаты.

**15.2.3. Понимание системы от начала до конца**

Важно иметь человека, который понимает всю систему от начала до конца, особенно в крупных системах. В экстренной ситуации лучше собрать команду специалистов.

**15.3. Заключение**

Отладка — системный, методический процесс, основанный на знании целей и задач пользователя. Важно устранять первопричину проблемы, использовать лучшие средства и поддерживать взаимодействие с пользователями.

**Глава 16: Однократное устранение проблем**

**Исправить что-то один раз лучше, чем исправлять это постоянно.** Подход "исправляйте один раз" помогает эффективно планировать время и повышать качество работы. Иногда решение проблемы на скорую руку кажется удобным, но важно не забывать о долгосрочном решении.

**16.1. Основы**

**Принцип «исправляйте один раз»** — основной подход. Если ошибка может повториться, ее следует искать и устранять и там.

**16.1.1. Не тратьте время зря**

Соблазнительно временно решить проблему, но лучше потратить время на окончательное решение, чтобы не возвращаться к ней снова. Это избегает циклических исправлений и повышает эффективность.

**16.1.2. Избегайте временных решений**

Временные решения могут быть оправданы в экстренных ситуациях, но не следует рассматривать их как долгосрочные. Важно записывать временные исправления и возвращаться к решению проблемы.

**16.1.3. Учитесь у плотников**

Плотники придерживаются принципа: «Семь раз отмерь, один отрежь». Важно дважды проверять действия, использовать первый сделанный объект как шаблон для всех последующих и регулярно проверять работу.

**16.2. Тонкости**

**Автоматизация устранения проблемы**: Автоматизация не должна только решать проблему, но и информировать администратора о временном решении. Важно создать механизмы для принятия постоянных мер.

**Риски автоматизации**: Автоматизация для устранения симптомов может привести к игнорированию корневых проблем. Важно создать механизмы для гарантии принятия постоянных мер.

**Автоматизация для постоянных решений**: В некоторых случаях автоматизация может исправить проблему полностью, но важно понимать, что такие меры не заменяют правильного планирования.

**Сложности и выгоды автоматизации**: Создание автоматизированных решений может занять время, но в перспективе это значительно сэкономит время и усилия.

**16.3. Заключение**

Лучше устранить проблему раз и навсегда, чем постоянно её исправлять. Важно избегать временных решений и сосредоточиться на поиске постоянных мер. Автоматизация может упростить процесс, но важно помнить о её недостатках.

**Глава 17: Управление изменениями**

Управление изменениями — процесс, который позволяет эффективно планировать, реализовывать и анализировать изменения в системе. Главная цель — управление рисками, возникающими из-за изменений.

**Основные компоненты управления изменениями**:

1. **Общение и составление графика**: Обеспечить хорошую коммуникацию и составить график изменений.
2. **Планирование и проверка**: Планировать изменения, разработать планы для проверки и план отмены.
3. **Процессы и документация**: Все изменения должны быть задокументированы и одобрены.
4. **Контроль версий и автоматизация**: Использовать систему контроля версий и автоматизацию изменений.

**Риски и процессы управления изменениями**: Малые изменения могут быть исключены из строгих процессов, но значительные изменения должны проходить полный процесс управления изменениями.

**ITIL и стандарты управления изменениями**: ITIL — ценный ресурс для изучения управления изменениями.

**17.1.1. Управление риском**

**Этапы управления риском**: Оцените риски, разработайте план смягчения, который включает консультации по изменению, план тестирования, план отмены, момент принятия решения и подготовку.

**Проблема принятия решения**: Важно, чтобы решение об откате изменений было поддержано другим системным администратором или руководителем.

**17.1.2. Структура распространения информации**

**Два аспекта распространения информации**: Информирование среди администраторов и пользователей. Важно не перегружать пользователей слишком большим количеством информации.

**Выбор метода распространения информации**: Метод распространения зависит от культуры компании. Важно, чтобы уведомления о значительных изменениях были отправлены "толканием".

**17.1.3. Составление графика**

**Три основных типа изменений**: штатные, критические и крупномасштабные. График крупных изменений должен быть согласован с пользователями. Критические обновления требуют особого внимания и заблаговременного уведомления.

**Выбор времени для критических обновлений**: Разные компании могут иметь различные подходы к времени внесения критических изменений. Важно избегать внешних специалистов или неавторизованных пользователей.

**Классификация изменений**: Определите, какие изменения следует классифицировать как штатные, критические или крупномасштабные.

**Запрет на изменения**: Определите время запрета на изменения, когда критические процессы требуют стабильности системы.

**17.1.4. Процессы и документация**

**Процессы и документация**: Важно соблюдать процессы и подготавливать соответствующую документацию. Системные администраторы заполняют формы контроля изменений, которые описывают изменения, риски и план отмены.

**Технические аспекты**: Процесс обновления конфигурационных файлов должен быть стандартизирован и документирован. Важно создать историю изменений, блокировку файлов, автоматизированные проверки и уведомления других систем.

**17.1.5.1. История изменений и блокировка**

**История изменений**: Система истории изменений позволяет отслеживать, кто и когда вносил изменения. Системы контроля версий обеспечивают такие функции, как блокировка файлов и добавление комментариев.

**17.1.5.2. Автоматизированные проверки**

**Автоматизированные проверки**: На заключительных этапах обновления конфигурационных файлов необходимо провести синтаксические проверки и гарантировать, что все приложения начали применять новые настройки.

**17.2. Тонкости**

**Автоматизированные интерфейсы**: Создание автоматических проверок для системных файлов и оконечного интерфейса для проверки ошибок и обновления файла.

**Собрания по вопросам управления изменениями**: Официально организованные собрания помогают обсуждать предлагаемые изменения, их возможные последствия и график внесения изменений.

**Упрощение процесса**: Оценить процесс с точки зрения возможного упрощения, избегать избыточных вопросов и оптимизировать бумажную работу.

**17.3. Заключение**

Управление изменениями — важное средство для повышения надежности системы. Оно помогает ограничивать внесение определенных изменений и обеспечивает наличие процесса предварительного рассмотрения изменений.

**Глава 18. Обновление серверов**

Обновление операционной системы сервера — критическая задача, требующая серьезной подготовки и тщательного тестирования. Процесс включает подготовку и использование контрольного списка.

**18.1. Основы**

**Шаги процесса обновления ОС**:

1. **Составьте контрольный список служб**.
2. **Проверьте совместимость программ с новой ОС**.
3. **Разработайте тесты для проверки работоспособности служб**.
4. **Напишите план отмены**.
5. **Выберите технический перерыв**.
6. **Объявите об обновлении**.
7. **Проверьте тесты**.
8. **Заблокируйте пользователей**.
9. **Проведите обновление под наблюдением**.
10. **Повторите все тесты**.
11. **Выполните план отмены (при необходимости)**.
12. **Разблокируйте пользователей**.
13. **Сообщите о завершении/отмене обновления**.
14. **Анализируйте процесс**.

**18.1.1. Этап 1: Составьте контрольный список служб**

Контрольный список служб — основа для выполнения всего процесса обновления. Используйте электронные таблицы для организации и совместного использования информации.

**18.1.2. Этап 2: Проверьте совместимость программ**

Проверьте, какие программы будут работать с новой ОС. Обновите программы до версий, поддерживаемых обеими ОС.

**18.1.3. Этап 3: Тесты для проверки**

Создайте автоматизированные скрипты для тестирования или используйте встроенные средства тестирования программ.

**18.1.4. Этап 4: Напишите план отмены**

План отмены — ключевой элемент, обеспечивающий возврат к предыдущему состоянию при проблемах с обновлением.

**18.1.5. Этап 5: Выберите технический перерыв**

Согласуйте с пользователями время обновления, когда системы не критичны для бизнеса.

**18.1.6. Этап 6: Сообщите об обновлении**

Уведомите пользователей о предстоящем обновлении, используя единый формат для всех уведомлений.

**18.1.7. Этап 7: Выполните тесты**

Проведите тесты перед обновлением, чтобы убедиться, что проблемы не связаны с системой до обновления.

**18.1.8. Этап 8: Заблокируйте пользователей**

Заблокируйте пользователей перед началом обновления, чтобы избежать их попыток входа в систему во время технического перерыва.

**18.1.9. Этап 9: Проведите обновление под наблюдением**

Выполняйте обновление в команде, чтобы быстро выявлять ошибки и улучшать качество работы.

**18.1.10. Этап 10: Проверьте свою работу**

Повторно запустите все тесты после обновления, чтобы убедиться в корректности системы.

**18.1.11. Этап 11: Выполните план отмены (при необходимости)**

Если обновление не удалось, выполните план отмены и восстановите систему до предыдущего состояния.

**18.1.12. Этап 12: Восстановите доступ пользователей**

Восстановите доступ пользователей после успешного обновления и проверки работы системы.

**18.1.13. Этап 13: Сообщите о завершении/отмене**

Сообщите пользователям о завершении обновления или его отмене, укажите, какие службы снова работают и как сообщить о проблемах.

**18.2.1. Добавляйте и удаляйте службы одновременно**

При добавлении и удалении служб одновременно, тесты для новых служб можно запустить на другом узле. Удаление службы может быть простым или сложным.

**18.2.2. Полная установка**

Иногда полная установка на временной машине позволяет избежать накопления устаревших файлов и фрагментации системы.

**18.2.3. Повторное использование тестов**

Интегрируйте тесты в систему мониторинга в реальном времени для упрощения процесса обновлений.

**18.2.4. Запись изменений системы**

Записывайте изменения в систему, используя файлы или википедии для отслеживания изменений.

**18.2.5. Генеральная репетиция**

Генеральная репетиция на другой машине помогает выявить проблемы и оценить время для обновления.

**18.2.6. Установка старых и новых версий на одной машине**

Иногда полезно оставить старые версии в отключенном состоянии, пока новые версии не установлены и не сертифицированы.

**18.2.7. Минимальные изменения первоначальной версии**

Минимизируйте изменения в системе, используя системы контроля версий для отслеживания изменений в конфигурации.

**18.3. Заключение**

Контрольный список — основной инструмент для управления обновлениями. Автоматизация тестов позволяет повторно проверять систему и интегрировать их в системы мониторинга. Этот процесс является основой для более сложных обновлений.