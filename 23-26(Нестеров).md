### Глава 23: Служба электронной почты

#### 23.1 Основы
- **Надежность и масштабируемость**: Основа успешной системы электронной почты.
- **Архитектура**: Простая, понятная, хорошо документированная.
- **Открытые протоколы и стандарты**: Обеспечивают взаимодействие с другими системами.
- **Безопасность**: Важна при проектировании и реализации.
- **Неприкосновенность и хранение**: Соответствие политике компании и нормативно-правовым требованиям.

#### 23.1.1 Политика неприкосновенности
- **Описание**: Кто и при каких обстоятельствах может читать электронную почту.
- **Просмотр**: Электронная почта может быть просмотрена администраторами при диагностике.
- **Конфиденциальность**: Незашифрованная информация не должна отправляться через сети других лиц.
- **Реализация**: Системные администраторы должны обеспечить соблюдение политики.

#### 23.1.2 Пространства имен
- **Единый адрес**: Один адрес для внешней и внутренней почты.
- **Стандартизация**: Избегать адресов вида имя.фамилия из-за возможных конфликтов.
- **Маркеры**: Уникальные именные маркеры, возможность выбора пользователями.

#### 23.1.3 Надежность
- **Ожидания**: Электронная почта должна быть всегда доступна.
- **Сбои**: Серьезное происшествие, вызывающее панику и потерю времени.
- **Проектирование**: Ориентировано на надежность, использование RAID-систем.
- **Резерв**: План быстрого восстановления службы при сбое.

#### 23.1.4 Простота
- **Сложность снижает надежность**: Ограничьте количество машин, обеспечивающих службу электронной почты.
- **Не включайте рабочие станции**: Не используйте рабочие станции как серверы электронной почты.
- **Основные аспекты**: Транспортировка, доставка, доступ, обработка списков и фильтрация.
- **Архитектура**: Для небольших компаний все функции на одной машине, для крупных – разделение функций.
- **Избегайте шлюзов**: Используйте одни стандарты по всей сети.
- **Единый механизм для списков рассылки**: Упрощает поддержку и автоматизацию.
- **Перемещение почтовых ящиков**: Используйте DNS для перенаправления запросов.

#### 23.1.5 Блокировка спама и вирусов
- **Спам и вирусы**: Блокировать на сервере, а не на клиенте.
- **Совершенных программ не существует**: Спам и вирусы постоянно эволюционируют.
- **Централизация функции**: Использование специализированных служб для анализа спама.

#### 23.1.6 Универсальность
- **Открытые протоколы**: Использование SMTP для транспортировки электронной почты.
- **Поддержка клиентов**: Использование стандартных протоколов для максимальной совместимости.
- **Избегайте нестандартных протоколов**: Они ограничивают выбор клиентов и увеличивают затраты.

#### 23.1.7 Автоматизация
- **Автоматизация задач**: Упрощает часто выполняемые задачи и обеспечивает их надежное выполнение.
- **Создание учетной записи**: Автоматизировать создание и удаление учетных записей электронной почты.
- **Перемещение учетных записей**: Автоматизация перемещения учетных записей для перераспределения нагрузки.
- **Уведомления об увольнении**: Автоматическая отправка сообщений о перенаправлении и увольнении.
- **Администрирование списков рассылок**: Автоматизация создания, удаления и управления списками рассылок.

#### 23.1.8 Базовый мониторинг
- **Мониторинг машин**: Проверка доступности и подключения машин.
- **Мониторинг ресурсов**: Мониторинг дискового пространства, использования диска и загрузки процессора.
- **Мониторинг электронной почты**: Отслеживание электронной почты для postmaster и просмотр логов.

#### 23.1.9 Резервирование
- **Избыточность**: Введение резервирования для надежности системы электронной почты.
- **План восстановления**: План быстрого восстановления при сбое.
- **Резервирование узлов**: Использование RAID и других методов для внутреннего резервирования.
- **Избыточность клиентов**: Обеспечение избыточности доступа клиентов.

#### 23.1.10 Расширение
- **Расширение систем**: Подготовка к увеличению объема трафика и количества пользователей.
- **Расширение систем транспортировки**: Обеспечение способности системы справляться с пиками трафика.
- **Расширение систем доставки**: Предсказуемое расширение с ростом числа пользователей.
- **Расширение систем обработки списков**: Управление большими списками адресатов и пиками трафика.
- **Переход на IMAP4**: Учет особых требований по ресурсам сервера при переходе с POP3 на IMAP4.

#### 23.1.11 Вопросы безопасности
- **Уязвимости узлов передачи почты**: Узлы передачи почты являются целями для злоумышленников из-за их доступа к внешнему миру и внутренней сети.
- **Нежелательный контент**: Проверка электронной почты на вирусы и другой нежелательный контент перед доставкой.
- **Сканирование содержимого**: Обеспечение поддержки максимального количества форматов данных для проверки.
- **Архитектура безопасности**: Согласование почтовой системы с архитектурой безопасности компании.
- **Безопасный удаленный доступ**: Обеспечение безопасного механизма удаленного доступа к электронной почте.

#### 23.1.12 Распространение информации
- **Политики и функции**: Информирование пользователей о политиках и функциях системы электронной почты.
- **Риски электронной почты**: Предупреждение пользователей о рисках, связанных с электронной почтой.
- **Документирование системы**: Документирование системы электронной почты для системных администраторов.
- **Процедуры восстановления**: Документирование процедур восстановления после отказа и аварийного восстановления.

#### 23.2 Тонкости
- **Улучшение службы**: Введение шифрования, особая политика резервного копирования, развитый мониторинг и расширение системы обработки списков.

#### 23.2.1 Шифрование
- **Простота шифрования**: Введение простого в применении механизма шифрования, особенно для высшего руководства.
- **Интеграция шифрования**: Интеграция шифрования в почтовый клиент для удобства использования.
- **Управление ключами**: Хранилище для ключей шифрования и механизмы аннулирования ключей.
- **Экстренные ситуации**: Механизмы восстановления паролей и контроль ключей.

#### 23.2.2 Политика хранения электронной почты
- **Проблемы резервного копирования**: Удаление резервных копий электронной почты через короткий период времени.
- **Политика хранения документов**: Ограничение хранения документов и упрощение поиска нужных документов.
- **Соблюдение закона Сарбейнса–Оксли**: Реализация политики хранения электронной почты с учетом закона Сарбейнса–Оксли.

#### 23.2.3 Расширенный мониторинг
- **Сквозной мониторинг**: Воспроизведение отправки сообщения для обнаружения всех возможных проблем.
- **Реалистичный тест**: Тест должен максимально реалистично воспроизводить пользователя или транзакцию.

#### 23.2.4 Обработка больших списков
- **Управление списками рассылки**: Централизованное управление списками на почтовых серверах.
- **Защита списков**: Ограничение отправки сообщений по спискам только авторизованным лицам.
- **Политика списков**: Четкое указание допустимых списков и правил для их создания и управления.
- **Расширение для больших списков**: Использование коммерческих программ или консультантов для обработки больших объемов.
- **Мониторинг времени доставки**: Отслеживание времени доставки сообщений всем адресатам списка.

#### 23.3 Заключение
- **Важность электронной почты**: Электронная почта аналогична коммунальным услугам.
- **Расширение и мониторинг**: Не откладывать вопросы расширения, мониторинга и резервирования.
- **Безопасность**: Учитывать безопасность с самого начала.
- **Политики**: Определить политику пространства имен и неприкосновенности частной информации.
- **Шифрование**: Введение шифрования для защиты важной информации.
- **Хранение электронной почты**: Снижение времени хранения резервных копий электронной почты.
- **Сквозной мониторинг**: Обеспечение сквозного мониторинга для компаний, где электронная почта связана с получением дохода.
- **Обработка больших списков**: Учет особых требований для серверов обработки списков большого объема.
### Глава 24: Служба печати

#### 24.1 Основы
- **Печать важна для бизнеса**: Пользователи считают печать одной из наиболее важных служб.
- **Приоритеты системных администраторов**: Должны соответствовать приоритетам пользователей.
- **Бизнес на бумаге**: Контракты, схемы, бумажные карты и редактирование документов требуют печати.
- **Надежность печати**: Печать должна всегда работать, особенно для важных документов.

#### 24.1.1 Уровень централизации
- **Собственные принтеры**: Дорого, но удобно для пользователей.
- **Централизованная печать**: Возможность печати с любого узла на любом принтере.
- **Финансовые аспекты**: Централизованные принтеры могут быть дешевле и более высокого качества.
- **Распределение принтеров**: Один принтер на участок здания, личные принтеры для конфиденциальности.
- **Специализированные устройства**: Высокоскоростные, широкоформатные плоттеры и фотопринтеры.

#### 24.1.2 Политика архитектуры печати
- **Центральная система буферизации**: Принимает и хранит задания для печати.
- **Обслуживание принтеров**: Собственными силами или по контракту.
- **Бухгалтерская политика**: Оплата принтеров, обслуживания и расходных материалов.
- **Заказы расходных материалов**: Кто заказывает и заправляет принтеры.
- **Стандарт оборудования**: Долговременные стандарты и рекомендуемые конфигурации.
- **Политика доступа**: Кто имеет доступ к каким принтерам и как это поддерживается.
- **Назначение имен принтерам**: Географический принцип или общее название.

#### 24.1.3 Структура системы
- **Пиринговая архитектура**: Децентрализованная, узлы отправляют задания напрямую на принтер. Простая в создании, сложная в администрировании.
- **Центральный буфер**: Централизованная архитектура, узлы отправляют задания на центральный сервер, который распределяет их по принтерам. Высокий уровень контроля, возможность интеллектуального выбора принтера.
- **Варианты архитектур**: Пиринговая архитектура может быть усложнена автоматизированными механизмами обновления. Центральный буфер может иметь резервные системы для предотвращения отказов.
- **Мониторинг**: Осуществлять мониторинг систем буферизации и состояния принтеров. SNMP для отслеживания состояния принтеров.

#### 24.1.4 Документация
- **Инструкция по печати**: Меню и кнопки для подключения к принтеру, команды для печати.
- **Список принтеров**: Каталог всех доступных принтеров, их местоположения и особенности.
- **Метка принтера**: Имя принтера и метки для лотков бумаги.

#### 24.1.5 Мониторинг
- **Мониторинг буферизации и печати**: Проверка очередей, дисков буферизации, логи, процессор, диск буферизации.
- **Состояние принтеров**: Отслеживание уровня бумаги и чернил, пополнение запасов.
- **Автоматизированные средства**: SNMP для предупреждений о состоянии принтеров.

#### 24.1.6 Экологические вопросы
- **Экологическая ответственность**: Минимизация отходов, переработка картриджей, внимательность к химическим веществам.
- **Программа переработки**: Корзины для перерабатываемых отходов рядом с принтерами, инструкции для пользователей.
- **Средства предварительного просмотра**: Поддержка дуплексной печати, отсутствие разделительных страниц, замена бумажных форм веб-формами.

#### 24.2 Тонкости
- **Автоматическое восстановление после отказа и балансировка нагрузки**: Автоматическое восстановление для снижения времени простоя, использование резервных систем для балансировки нагрузки.
- **Печать с привлечением сторонних исполнителей**: Использование типографий для необычных задач печати.
- **Выделенный сотрудник для обслуживания**: Назначение отдельного сотрудника для обслуживания принтеров и заказа расходных материалов.
- **Уничтожение бумаги**: Уничтожение конфиденциальной информации, проверка сторонних исполнителей по уничтожению бумаги.
- **Борьба с недопустимым использованием принтеров**: Контроль использования принтеров, постраничная оплата, психологические факторы.

#### 24.2.1 Автоматическое восстановление после отказа и балансировка нагрузки
- **Автоматическое восстановление**: Снижение времени простоя, использование резервных систем.
- **Балансировка нагрузки**: Распределение задач печати между несколькими системами буферизации.

#### 24.2.2 Печать с привлечением сторонних исполнителей
- **Использование типографий**: Отправка PDF-файлов в типографии для необычных задач печати.
- **Драйверы принтеров**: Драйверы, которые отправляют распечатку на печатные устройства напрямую из приложений.

#### 24.2.3 Выделенный сотрудник для обслуживания
- **Обслуживание принтеров**: Назначение отдельного сотрудника для обслуживания принтеров.
- **Заказ расходных материалов**: Назначение ответственного за заказ расходных материалов.

#### 24.2.4 Уничтожение бумаги
- **Уничтожение конфиденциальной информации**: Уничтожение всех документов, которые не должны быть общедоступными.
- **Проверка сторонних исполнителей**: Регулярная проверка сторонних исполнителей по уничтожению бумаги.

#### 24.3 Заключение
- **Основа надежной системы печати**: Четко определенные политики, архитектура системы, мониторинг и документация.
- **Экологические аспекты**: Программы переработки бумаги и предоставление средств для избегания печати.
- **Автоматическое восстановление и обслуживание**: Автоматическое восстановление после сбоев, назначение сотрудников для обслуживания принтеров.
- **Социальные проблемы**: Решение социальных проблем, связанных с использованием принтеров.

### Гва 25: Хранение данных

#### 25.1 Основы
- **Парадокс хранения данных**:
  - Стоимость отдельного диска снижается.
  - Стоимость управления данными растет.

#### 25.1.1 Терминология
- **25.1.1.1 Основные элементы отдельных дисков**:
  - Шпиндель, пластины, головки.
  - Контроллер диска.
  - Адаптер главной шины (HBA).

- **25.1.1.2 RAID**:
  - **RAID 0**: Распределение данных, быстрее чтение и запись, менее надежен.
  - **RAID 1**: Отражение данных, быстрее чтение, хорошая надежность.
  - **RAID 5**: Распределенный контроль четности, хорошая надежность, медленнее запись.
  - **RAID 10**: Комбинация RAID 0 и RAID 1, высокая надежность и скорость.

- **25.1.1.3 Тома и файловые системы**:
  - Том: элемент хранилища данных, видимый серверу.
  - Файловая система: форматирует том, различные типы для разных целей и проблем производительности.

#### 25.1.1.4 DAS: хранилище прямого подключения
- DAS: жесткий диск, подключенный к серверу.
- Включает RAID-массивы, подключенные напрямую.

#### 25.1.1.5 NAS: хранилище сетевого подключения
- NAS: хранилище, доступное через сеть.
- Примеры: NFS для UNIX, CIFS для Windows.
- Поставщики: Network Appliance, EMC, Linksys.

#### 25.1.1.6 SAN: сети хранения данных
- SAN: сеть с высокой скоростью и низкой задержкой для хранения данных.
- LUN: логический блок, доступный серверу.
- Преимущества: совместное использование ресурсов, снижение изолированного хранения.

#### 25.1.2 Управление хранением
- Управление хранением: комбинация процессов и технологий.
- Важно вовлекать пользователей в управление хранением.

#### 25.1.2.1 Относитесь к системам хранения как к ресурсу сообщества
- Распределение пространства: меньше политики, больше самоуправления.
- Расходы на хранение: 80% накладные расходы.
- Оценка потребностей: важна для планирования и распределения ресурсов.

#### 25.1.2.2 Проведите оценку потребностей хранения
- Оценка потребностей: начать с разговора с пользователями.
- Вопросы: текущее и перспективное использование, планы и проблемы.
- Важно: поддерживать связи и задавать правильные вопросы.

#### 25.1.2.3 Отражайте группы в инфраструктуре хранения
- Группировать пользователей по подразделениям или группам.
- Общие хранилища для специфических требований.
- Квоты: могут быть полезны, но могут вызывать сопротивление.

#### 25.1.2.4 Разработайте политику хранения запасных частей
- Запасные части: важны для инфраструктуры хранения.
- Отделяйте запасные диски общего назначения от запасных дисков для инфраструктуры хранения.
- Прогнозируйте количество необходимых дисков на основе сбоев оборудования в прошлом.
- Планируйте модернизацию серверов и закупку запчастей для новых систем.

#### 25.1.2.5 Планируйте будущее хранение
- Запасные части: часто требуют дополнительных ресурсов.
- Пользователям может понадобиться больше, чем просто диск (например, установка ОС).
- Стандартизация и автоматизация помогают решать проблемы по умолчанию.
- Планируйте ежеквартальные технологические перерывы для обновления системы хранения.

#### 25.1.2.6 Создайте стандарты хранения
- Стандарты помогают отказать в установке нестандартного оборудования.
- Стандарты могут быть простыми или сложными, но должны обеспечивать целостность.
- Преимущества стандартизации: содержание общего набора запчастей, минимизация различных систем.
- Внедрение стандартов может предотвратить проблемы с неподдерживаемыми системами.

#### 25.1.3 Хранение как служба
- Хранение как служба: применяйте стандартные базовые знания о службах.
- SLA хранения: включает доступность, время ответа и MTTR.
- Используйте стандартные средства тестирования для измерения показателей.

#### 25.1.3.1 SLA хранения
- SLA хранения: определяет доступность и время ответа.
- Доступность: достижимость и количество пригодного для использования пространства.
- Время ответа: задержка при заданной загрузке.
- MTTR: среднее время исправления неполадок.

#### 25.1.3.2 Надежность
- Надежность: все рано или поздно ломается.
- RAID и надежность: уровни RAID, кроме RAID 0, увеличивают надежность.
- NAS и надежность: зависит от надежности сети.
- Определите, какую надежность вы можете себе позволить.
- Обеспечение высокой доступности данных стоит дорого.

#### 25.1.3.3 Резервное копирование
- RAID не является стратегией резервного копирования.
- Резервные копии на других носителях (магнитная лента, другой диск) необходимы.
- Зеркальные тома RAID могут использоваться для резервного копирования, но это временно снижает защиту данных.
- NAS и резервное копирование: упрощает резервное копирование, так как все данные хранятся на сервере NAS.
- SAN и резервное копирование: упрощает резервное копирование за счет подключения устройства для записи на магнитную ленту к SAN.

#### 25.1.3.4 Мониторинг
- Мониторинг: важный элемент стратегии соответствия потребностям пользователей.
- Отслеживайте использование пространства, трафик доступа, интенсивность использования процессора.
- Уведомления о заполнении пространства и пиках или провалах в передаче данных.
- Отслеживайте поломок дисков, другие сбои, использование пропускной способности сети, операции с файлами.

#### 25.1.3.5 Предостережения о SAN
- Технологии SAN постоянно меняются, трудно заставить компоненты различных производителей работать вместе.
- Рекомендуется ограничиться одним-двумя производителями и тщательно тестировать решения.
- Новые модели должны проходить тщательное тестирование перед интеграцией в инфраструктуру.
- Создайте набор тестов, важных для вашей среды, включая стандартные тесты, тесты конкретных приложений и специфичные для компании операции.

#### 25.1.4 Быстродействие
- Быстродействие: время, требуемое для чтения и записи данных.
- Оптимизация: сначала измерить, потом оптимизировать на основе данных, затем измерить снова.
- Основные средства оптимизации: оперативная память и шпиндели.

##### Основные правила быстродействия:
1. Никогда не обращайтесь к сети, если вы можете оставаться на диске.
2. Никогда не обращайтесь к диску, если вы можете оставаться в памяти.
3. Никогда не обращайтесь к памяти, если вы можете оставаться на чипе.
4. Имейте достаточно денег и не бойтесь их тратить.

#### 25.1.4.1 RAID и быстродействие
- **RAID 0**: высокое быстродействие чтения и записи, но низкая надежность.
- **RAID 1**: высокое быстродействие чтения, скорость записи определяется самым медленным диском.
- **RAID 3**: хорошее быстродействие при последовательном чтении, рекомендуется для больших графических файлов и видеоприложений.
- **RAID 4 и RAID 5**: высокая скорость чтения, но скорость записи хуже.
- **RAID 10**: высокая скорость чтения и записи, высокая надежность.

#### 25.1.4.2 NAS и быстродействие
- NAS: изолирует нагрузку по передаче файлов от остальных серверов.
- Упрощает применение политик резервного копирования, использования и безопасности.
- Перемещение файлов в NAS снижает загрузку сервера, повышая быстродействие.

#### 25.1.4.3 SAN и быстродействие
- SAN: убирает трафик файлов из основной сети, обеспечивает низкую задержку и высокую скорость.
- Изолируется от других сетей, предоставляя преимущество в безопасности.
- Fibre channel и iSCSI позволяют инкапсулировать SCSI-команды и отправлять их по сети.

#### 25.1.4.4 Оптимизация конвейерной обработки данных
- Конвейерная обработка данных: предварительная загрузка данных для минимизации времени доступа.
- Алгоритмы конвейерной обработки: "глупые" и "умные".
- Запись данных: операционные системы обеспечивают атомарную запись, подтверждение записи немедленно рискованно.

#### 25.1.5 Оценка новых решений по хранению
- Оценка новых решений: зависит от модели использования.
- Пропускная способность и конфигурация подсистем или компонентов.
- Скрытые "подводные камни": использование ресурсов памяти и процессора сервера.
- Тестирование всех элементов новой системы.

#### 25.1.6 Распространенные проблемы
- Распространенные проблемы: граничные условия, цепная реакция сбоев.
- Физическая инфраструктура: требования по электропитанию и охлаждению.
- Проверка стабильности инфраструктуры питания.
- Индикатор потребляемой мощности для оценки требований систем хранения.

#### 25.1.6.2 Превышение времени ожидания
- Превышение времени ожидания: проблема в сильно оптимизированных системах.
- NAS и SAN: чувствительны к изменениям в конфигурации сетей.
- Превышение времени ожидания может возникнуть на стороне клиента.
- При сильной нагрузке задержка может вызвать превышение времени ожидания TCP.

#### 25.1.6.3 Поведение при перегрузке
- Перегрузка: может вызвать задержки и медленные ответы.
- Плотность доступа к диску (DAD): важна при выборе систем хранения.
- Высокая интенсивность ввода/вывода требует лучшего соотношения DAD.
- Планирование инфраструктуры хранения: выделение серверов хранения для конкретных приложений.

#### 25.2 Тонкости
- Оптимизация использования RAID по приложениям.
- Настройка распределения данных: выравнивание размера блока с размером блока данных приложений.
- Упорядочение записи: перемещение интенсивно записываемых участков на другой диск.

#### 25.2.1 Оптимизация использования RAID
- Настройка распределения данных: важна для баз данных и серверов приложений.
- Размер блока должен поддерживаться всем путем ввода/вывода.
- Упорядочение записи: перемещение интенсивно записываемых участков на другой диск.

#### 25.2.1.1 Настройка распределения данных
- Изменение размера блока базы данных до размера блока распределения данных.
- Пример: размер блока распределения в 8 Кб для массива из пяти дисков RAID 5.
- Настройка: не разделять системы хранения между различающимися приложениями.

#### 25.2.1.2 Упорядочение записи
- Проблемы быстродействия: вызваны несколькими операциями записи в независимые потоки данных.
- Перемещение файла лога на другой диск повышает быстродействие.
- Примеры: базы данных, процессы сборки программ, файловые системы с протоколированием.

#### 25.2.2 Пределы хранения: отставание плотности доступа к диску
- Плотность доступа к диску (DAD): измеряется в операциях ввода/вывода в секунду на гигабайт емкости.
- Высокая интенсивность ввода/вывода требует лучшего соотношения DAD.
- Планирование инфраструктуры хранения: выделение серверов хранения для конкретных приложений.
- Примеры: базы данных, файловые системы инженерных подразделений.

#### 25.2.2.1 Фрагментация
- Фрагментация: перемещение головки диска на новое место происходит медленно.
- Современные операционные системы: лучше удается не создавать фрагментированные файлы.
- Дефрагментация диска: риск уничтожения данных.
- Многопользовательские системы: фрагментация влияет меньше на быстродействие.

#### 25.2.3 Непрерывная защита данных
- Непрерывная защита данных (CDP): процесс копирования изменений данных в определенный временной промежуток.
- CDP: позволяет восстановить данные до желаемого момента.
- CDP: используется для минимизации времени восстановления и снижения вероятности потери данных.
- CDP: дорогая технология, используется для критически важных данных.
- Причины использования CDP: соблюдение норм отрасли, предотвращение потери прибыли.

#### 25.3 Заключение
- Основные принципы управления хранением: реализация решения по хранению в соответствии с нуждами приложений или пользователей.
- Отношение к хранению как к службе: позволяет установить точку отсчета при определении расходов.
- Возможности предоставления услуг по хранению данных: выбор уровня надежности и быстродействия.
- Понимание основных принципов связи устройств хранения с операционной системой и файловой системой.
- Использование концепций, таких как RAID, для построения решений по хранению.
- Проблема неравномерности роста плотности диска и пропускной способности ввода/вывода диска.

### Глава 26: Резервное копирование и восстановление

#### 26.1 Основы
- **Цель резервного копирования**: Возможность восстановления потерянных данных.
- **Причины потери данных**: Ошибки пользователей, сбои оборудования, катастрофы.
- **Терминология**:
  - **Полное резервное копирование**: Копирование всех файлов раздела.
  - **Инкрементальное резервное копирование**: Копирование измененных файлов с предыдущего резервного копирования.
- **Планирование резервного копирования**:
  - Определение SLA (Service Level Agreement) для восстановления данных.
  - Создание политики и графика резервного копирования.
  - Документирование процедур и графиков.

#### 26.1.1 Причины для восстановления данных
1. **Случайное удаление файлов**: Пользователь случайно удаляет файлы.
2. **Сбой диска**: Полная потеря данных на диске.
3. **Просмотр архивных данных**: Сохранение данных для аварийного восстановления или правовых целей.

#### 26.1.1.1 Случайное удаление файлов
- **Требования**: Быстрое восстановление файлов.
- **Современные системы**: Позволяют пользователям самостоятельно восстанавливать данные.
- **Преимущества**: Снижение нагрузки на системных администраторов, улучшение рабочих процессов пользователей.

#### 26.1.4 SLA и политика восстановления данных
- **Определение SLA**: Письменный документ, указывающий обслуживание и быстродействие.
- **Политика**: Создается в диалоге с пользователями.
- **Пример SLA**:
  - Восстановление файлов с детализацией в один рабочий день за последние полгода.
  - Восстановление после сбоя диска должно занимать 4 часа, с потерей данных не более чем за два рабочих дня.
  - Архивы должны быть полными резервными копиями на отдельных лентах, создаваемыми каждый квартал и хранящимися вечно.

#### 26.1.5 График резервного копирования
- **Установка графика**: Конкретный график резервного копирования.
- **Пример графика**:
  - Полное резервное копирование в пятницу вечером.
  - Инкрементальное резервное копирование с воскресенья по четверг вечером.
- **Периодичность полного резервного копирования**: Ежемесячное создание полных резервных копий.
- **Автоматизация**: Программы резервного копирования могут автоматически создавать график на основе требований.

#### 26.1.5.1 Пример: Пузырьковый динамический график резервного копирования
- **Сортировка разделов**: По дате последнего резервного копирования.
- **Приоритет**: Разделы с наибольшим временем с последнего резервного копирования получают полное резервное копирование.
- **Настройка системы**: Выделение дополнительных устройств записи на ленты для полного или инкрементального резервного копирования.

#### 26.1.5.2 Два уровня инкрементального резервного копирования
- **Преимущества**: Экономия ленты.
- **Недостатки**: Усложнение отслеживания и восстановления данных.
- **Пример**: Полное резервное копирование в начале месяца, инкрементальное копирование уровня 2 в середине месяца.

#### 26.1.6 Планирование времени и емкости
- **Ограничения по времени**: Восстановление и резервное копирование ограничены по времени.
- **Скорость резервного копирования**: Ограничена самым медленным звеном (чтение с диска, запись на резервный носитель, пропускная способность сети).
- **Скорость восстановления**: Определяется факторами, обратными упомянутым.
- **Проблемы с приводами для магнитных лент**: Скорость записи и чтения может сильно различаться.
- **Эффект чистки обуви**: Механизм чтения/записи передвигается вперед-назад над одним и тем же участком ленты.
- **Сетевые проблемы**: Перегрузка сети может замедлить резервное копирование.
- **Восстановление данных**: Поиск одного файла на диске может занять столько же времени, сколько полное восстановление диска.
- **Использование диска как буфера**: Серверы копируют данные на диски узла резервного копирования, затем узел записывает данные на ленту (диск–диск–лента, D2D2T).
- **Тестирование**: Протестировать временные условия резервного копирования и восстановления.

#### 26.1.7 Планирование расходных материалов
- **Политика и график**: Влияют на скорость использования расходных материалов (лент, чистящих лент и т. д.).
- **Пример расчета**:
  - Первые полгода: 1248 лент, 99 840 долларов.
  - Второе полугодие: 260 лент, 18 200 долларов.
  - Второй и третий годы: 36 400 долларов в год.
  - Четвертый и последующие годы: 6000 долларов в год.
- **Изменение политики**: Хранение полных резервных копий только один год снижает средние расходы на 32%.
- **Баланс**: Нахождение равновесия между техническими требованиями и финансовыми ограничениями.

#### 26.1.8 Вопросы процесса восстановления
- **Ожидания пользователей**: Пользователи должны знать политику резервного копирования и как запросить восстановление файла.
- **Безопасность**: Проверка прав доступа и владельцев файлов при восстановлении.
- **Подтверждение запросов**: Запросы на восстановление должны подтверждаться.
- **Документация**: Процесс восстановления должен быть хорошо документирован.
- **Обучение**: Несколько человек должны быть обучены выполнению восстановления.
- **Контактная информация**: В документах должна присутствовать контактная информация служб поддержки и номера контрактов на обслуживание.

#### 26.1.9 Автоматизация резервного копирования
- **Опасность отсутствия автоматизации**: Увеличивает риск человеческой ошибки и ненадежность выполнения резервного копирования.
- **Аспекты автоматизации**: Команды, график, управление лентами и их инвентаризация.
- **Ранняя автоматизация**: Скрипты для воспроизведения команд, алгоритмы создания графиков, автоматизация физической работы с лентами.
- **Преимущества автоматизации**: Снижение объема умственной работы, возможность передачи задачи менее квалифицированным сотрудникам.
- **Пример автоматизации**: Система, которая печатает метки на кассетах и оптимизирует использование лент.
- **Плохая автоматизация**: Не снижает объем умственной работы.
- **Хорошая автоматизация**: Снижает объем умственной работы и выполняет задачи автоматически.

#### 26.1.10 Централизация
- **Централизация резервного копирования**: Снижает расходы на оборудование и трудовые ресурсы.
- **Сетевые системы резервного копирования**: Позволяют подключать крупную технику резервного копирования к одному или нескольким узлам.
- **Приводы с автоматической заменой лент**: Содержат десятки, сотни или тысячи лент и роботизированные манипуляторы.
- **Преимущества централизации**: Снижение расходов на трудовые ресурсы, возможность использования оставшихся блоков в устройстве для завершения задач.

#### 26.1.11 Инвентаризация лент
- **Инвентаризация**: Критически важна для возможности своевременно выполнять восстановление.
- **Инвентаризация в сети**: Ведется крупными автоматизированными системами резервного копирования.
- **Качество инвентаризации**: Влияет на скорость восстановления данных.
- **Пофайловая инвентаризация**: Требует много дискового пространства, но ускоряет процесс восстановления.
- **Восстановление инвентаризации**: Программа должна иметь возможность перестроить инвентаризацию в случае ее потери.
- **Экстренные ситуации**: Возможность восстановления без доступа к инвентаризации и другим системам.

#### 26.2 Тонкости
- **Пробное восстановление**: Периодическое восстановление случайных файлов для проверки качества носителей.
- **Автоматизированные запросы**: Программы для автоматического выбора случайных файлов и запроса их восстановления.
- **Пробное восстановление диска**: Периодическое восстановление всего диска для определения времени и показателей использования.
- **Внешнее хранение**: Хранение лент с резервными копиями в безопасном месте вне основного местоположения компании.
- **Неофициальное внешнее хранение**: Неформальные политики хранения, например, хранение лент дома у сотрудников.
- **Собственное внешнее хранение**: Создание систем внешнего хранения в компаниях с несколькими зданиями.
- **Сетевое внешнее резервное копирование**: Выполнение резервного копирования через сеть между подразделениями.
- **Системы резервного копирования через Интернет**: Услуги резервного копирования через Интернет для домашних и корпоративных пользователей.
- **Базы данных высокой доступности**: Особые требования к резервному копированию баз данных, использование модулей и зеркального отражения.

#### 26.2.1 Пробное восстановление
- **Проверка качества носителей**: Восстановление случайных файлов для проверки качества носителей.
- **Автоматизированные запросы**: Программы для автоматического выбора случайных файлов и запроса их восстановления.
- **Пробное восстановление диска**: Периодическое восстановление всего диска для определения времени и показателей использования.

#### 26.2.2 Резервные носители и внешнее хранение
- **Безопасное хранение**: Хранение лент с резервными копиями в безопасном месте.
- **Внешнее хранение**: Хранение лент вне основного местоположения компании.
- **Неофициальное внешнее хранение**: Неформальные политики хранения, например, хранение лент дома у сотрудников.
- **Собственное внешнее хранение**: Создание систем внешнего хранения в компаниях с несколькими зданиями.
- **Сетевое внешнее резервное копирование**: Выполнение резервного копирования через сеть между подразделениями.
- **Системы резервного копирования через Интернет**: Услуги резервного копирования через Интернет для домашних и корпоративных пользователей.

#### 26.2.3 Базы данных высокой доступности
- **Особые требования**: Базы данных имеют особые требования к резервному копированию.
- **Модули для резервного копирования**: Использование модулей для выполнения резервного копирования определенных баз данных.
- **Зеркальное отражение**: Использование зеркального отражения для безопасного резервного копирования баз данных.

#### 26.2.4 Изменения технологий
- **Постоянные изменения**: Технологии дисков и лент попеременно опережают друг друга.
- **Размер диска**: Удваивается каждые 15–18 месяцев, что требует резервного копирования дисков с большим объемом данных.
- **Емкость лент**: Рост происходит более широкими шагами, но с меньшей частотой.
- **Модернизация оборудования**: Не следует модернизировать слишком часто, чтобы избежать работы с большим количеством различных форматов лент.
- **Старые системы**: Большинство компаний используют главным образом ту технологию, которая была самой совершенной при установке системы.
- **Оставьте один привод для девятидорожечной магнитной ленты**: Пример заслуживания уважения и признательности.

#### 26.3 Заключение
- **Политика резервного копирования**: Основа для всех решений.
- **Типы запросов на восстановление**: Случайное удаление файлов, восстановление после поломки дисков, просмотр архивных данных.
- **График резервного копирования**: Определяется политикой, включает динамические графики.
- **Автоматизация**: Минимизация человеческой работы и ошибок.
- **Централизация**: Экономия сил и распределение стоимости оборудования.
- **Инвентаризация**: Хорошая опись файлов и лент для быстрого восстановления.
- **Экономические подходы**: Снижение риска и затрат на оборудование и расходные материалы.
- **Постоянные изменения технологий**: Необходимость расширения и замены системы каждые 3–5 лет.
- **Пробное восстановление**: Проверка правильности резервного копирования.
- **Внешнее хранение**: Безопасное хранение резервных носителей вне основного местоположения компании.